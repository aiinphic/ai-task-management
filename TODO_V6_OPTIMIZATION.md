# AI 任務管理系統 v6.0 優化待辦清單

建立日期: 2025-11-27

---

## 📋 需求分析

### 1. 導航結構調整
**需求**: 新增「部門概況」獨立分頁
**目標結構**:
```
儀表板 | 所有任務列表 | 部門概況
```

---

### 2. 同級任務優先級排序問題

**問題描述**:
當有 2 個任務都是「一級|營收」時,它們之間仍需要有高低順序的優先級區分。

**分析**:
- 目前符號系統: 每個符號都是獨立的(例如「產品銷售」、「客戶簽約」都是營收符號)
- 需要在「同級」任務之間建立優先級排序機制

**解決方案選項**:

#### 方案 A: 符號優先級權重
為每個符號定義內部權重值,例如:
```
一級|營收:
  - 客戶簽約 (權重: 100)
  - 產品銷售 (權重: 95)
  - 商務洽談 (權重: 90)
```

**優點**: 
- 符號本身就代表優先級
- 視覺上清晰(不同符號 = 不同優先級)

**缺點**: 
- 同一符號的任務仍無法區分優先級
- 權重定義需要業務邏輯支持

---

#### 方案 B: 緊急度標記 ⭐
在任務卡片右上角加入星級標記:
```
⭐⭐⭐ = 極高優先
⭐⭐   = 高優先
⭐     = 中優先
(無)   = 一般
```

**優點**: 
- 直觀易懂
- 可手動調整
- 與符號系統獨立運作

**缺點**: 
- 增加視覺元素
- 需要使用者手動設定

---

#### 方案 C: 數字優先級 + 顏色強度
在分級標籤旁顯示優先級數字,並用顏色深淺表示:
```
一級|營收 P1  (深金色背景)
一級|營收 P2  (中金色背景)
一級|營收 P3  (淺金色背景)
```

**優點**: 
- 清楚的數字排序
- 顏色深淺提供視覺層次

**缺點**: 
- 可能造成視覺混亂
- 需要定義顏色梯度

---

#### 方案 D: 排序指標 (推薦)
在任務卡片左側加入排序指標條:
```
┃ 一級|營收  (粗條 = 高優先)
│ 一級|營收  (中條 = 中優先)
┆ 一級|營收  (細條 = 低優先)
```

**優點**: 
- 不干擾現有設計
- 視覺層次清晰
- 可自動計算(根據截止日期、預估時間等)

**缺點**: 
- 需要定義排序規則

---

#### 方案 E: 綜合評分自動排序
根據多個維度自動計算優先級分數:
```
優先級分數 = 
  (緊急度權重 × 40%) + 
  (預估時間權重 × 20%) + 
  (截止日期權重 × 30%) + 
  (符號權重 × 10%)
```

**優點**: 
- 完全自動化
- 客觀公正
- 減少人為判斷

**缺點**: 
- 演算法複雜
- 需要調校權重
- 使用者無法直接控制

---

### 3. 任務卡片標籤文字優化

**現況**: 
```
一級 / 二級 / 三級
```

**需求**: 
```
1級|營收 / 2級|流量 / 3級|行政
```

**實作位置**: 
- `client/src/components/TaskCard.tsx`
- 符號圖標右下角的標籤

---

### 4. 任務卡片時間欄位問題

**問題**: 任務卡片出現「1小時」或「10分鐘」等數據,不清楚用途

**需確認**:
- 這是「預估時間」還是「已投入時間」?
- 是否需要保留?

**建議**:
- 如果是「預估時間」→ 改為「預估 1h」
- 如果是「已投入時間」→ 改為「已投入 1h」
- 如果無用途 → 移除

---

### 5. 時間統計分析重構

**現況**: 
儀表板底部有「時間統計分析」區塊,包含:
- 今日時間投入(甜甜圈圖)
- 任務分級時間佔比(圓餅圖)
- 每日時間分布(長條圖)

**需求**: 
改為「以人為單位」的卡片式設計

**新設計方案**:

#### 人員時間統計卡片
```
┌─────────────────────────────────┐
│ 👤 李安安 (產品部)              │
├─────────────────────────────────┤
│ 📊 今日投入: 6.5h               │
│                                 │
│ 🎯 今日任務時間佔比 TOP 3:      │
│   1. 產品需求分析    2.5h (38%)│
│   2. UI/UX 設計      2.0h (31%)│
│   3. 客戶訪談        1.5h (23%)│
│                                 │
│ 📈 任務分級時間佔比:            │
│   [圓餅圖]                      │
│   - 1級|營收: 3h (46%)          │
│   - 2級|流量: 2h (31%)          │
│   - 3級|行政: 1.5h (23%)        │
│                                 │
│ 📅 本週時間趨勢:                │
│   [小型長條圖]                  │
└─────────────────────────────────┘
```

**視覺化建議**:

1. **今日任務時間佔比** → 使用橫向長條圖 (更清楚顯示排名)
   ```
   產品需求分析  ████████████████░░ 2.5h (38%)
   UI/UX 設計    ████████████░░░░░░ 2.0h (31%)
   客戶訪談      ██████████░░░░░░░░ 1.5h (23%)
   ```

2. **任務分級時間佔比** → 使用圓餅圖 (符合您的建議)
   - 金色區塊 = 1級|營收
   - 藍色區塊 = 2級|流量
   - 灰色區塊 = 3級|行政

3. **本週時間趨勢** → 使用迷你長條圖
   ```
   一 ████ 4h
   二 ██████ 6h
   三 █████ 5h
   四 ███████ 7h
   五 ████ 4h
   ```

---

## ✅ 待辦事項

### Phase 1: 分析與設計
- [x] 分析同級任務優先級排序需求
- [x] 設計人員時間統計卡片方案
- [ ] 確認任務卡片時間欄位用途
- [ ] 決定優先級排序方案(A/B/C/D/E)

### Phase 2: 導航結構調整
- [ ] 新增「部門概況」分頁路由
- [ ] 建立 `client/src/pages/Departments.tsx`
- [ ] 將現有部門卡片元件移至新分頁
- [ ] 更新導航選單

### Phase 3: 任務卡片優化
- [ ] 修改分級標籤文字(1級|營收/2級|流量/3級|行政)
- [ ] 處理時間欄位顯示邏輯
- [ ] 實作優先級排序機制(根據選定方案)

### Phase 4: 時間統計重構
- [ ] 建立 `PersonTimeCard.tsx` 元件
- [ ] 實作今日任務時間佔比橫向長條圖
- [ ] 實作任務分級時間佔比圓餅圖
- [ ] 實作本週時間趨勢迷你長條圖
- [ ] 在儀表板顯示所有人員的時間統計卡片

### Phase 5: 測試與交付
- [ ] 測試所有新功能
- [ ] 儲存檢查點
- [ ] 交付成果

---

## 🤔 需要您確認的問題

1. **優先級排序方案**: 您偏好哪個方案?(A/B/C/D/E)
   - 我個人推薦 **方案 D(排序指標)** 或 **方案 B(星級標記)**

2. **任務卡片時間欄位**: 
   - 這個「1小時」「10分鐘」是什麼數據?
   - 是否需要保留?如何標示?

3. **人員時間統計卡片**: 
   - 是否要顯示所有人員?還是只顯示登入使用者?
   - 卡片排序方式?(按投入時間/按部門/按姓名)

4. **今日任務時間佔比**: 
   - 您同意使用橫向長條圖嗎?還是有其他偏好?

---

## 📊 視覺化方案比較

### 今日任務時間佔比

#### 選項 1: 橫向長條圖 (推薦)
**優點**: 
- 清楚顯示排名順序
- 易於比較時間差異
- 可顯示具體數值

**缺點**: 
- 佔用垂直空間

---

#### 選項 2: 圓餅圖
**優點**: 
- 視覺美觀
- 佔用空間小

**缺點**: 
- 難以精確比較
- 項目過多時擁擠

---

#### 選項 3: 樹狀圖 (Treemap)
**優點**: 
- 空間利用率高
- 視覺層次清晰

**缺點**: 
- 較不直觀
- 實作複雜

---

## 💡 我的建議

綜合考量視覺清晰度與實用性,我建議:

1. **優先級排序**: 採用 **方案 B(星級標記)** 
   - 簡單直觀
   - 使用者可手動調整
   - 不干擾現有符號系統

2. **人員時間統計**: 採用卡片式設計
   - 今日任務時間佔比 → **橫向長條圖** (TOP 5)
   - 任務分級時間佔比 → **圓餅圖**
   - 本週時間趨勢 → **迷你長條圖**

3. **導航結構**: 
   ```
   儀表板 | 所有任務列表 | 部門概況
   ```

請您確認這些方案,我將立即開始實作!
