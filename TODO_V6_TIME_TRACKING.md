# AI 任務管理系統 v6.0 - 時間追蹤與審核功能待辦清單

建立日期: 2025-11-27
版本: v6.0
目標: 實現完整的時間追蹤記錄、已完成任務回溯、時間分布分析等審核功能

---

## Phase 1: 規劃時間追蹤記錄架構與頁面設計

### 1.1 數據結構設計
- [ ] 設計任務操作記錄(TaskActionLog)類型
  - 記錄每次點擊(開始/暫停/繼續/完成)
  - 時間戳記
  - 操作類型
  - 子任務 ID
- [ ] 更新 Task 類型,新增 actionLogs 欄位
- [ ] 更新 Subtask 類型,新增 actionLogs 欄位

### 1.2 頁面架構設計
- [ ] 設計「時間分析」頁面佈局
- [ ] 規劃已完成任務回溯對話框結構
- [ ] 設計時間分布圓餅圖對話框

---

## Phase 2: 實現任務細項點擊記錄與數據儲存

### 2.1 操作記錄功能
- [ ] 在 SubtaskCard 元件加入操作記錄邏輯
  - 點擊「開始」按鈕 → 記錄開始時間
  - 點擊「暫停」按鈕 → 記錄暫停時間
  - 點擊「繼續」按鈕 → 記錄繼續時間
  - 點擊「完成」按鈕 → 記錄完成時間
- [ ] 計算實際投入時間(扣除暫停時間)
- [ ] 儲存操作記錄到 actionLogs 陣列

### 2.2 任務完成邏輯
- [ ] 當所有子任務完成時,自動標記主任務為「已完成」
- [ ] 將已完成任務移動到 completedTasks 陣列
- [ ] 更新儀表板統計數據

---

## Phase 3: 開發已完成任務回溯功能

### 3.1 已完成任務卡片
- [ ] 在儀表板「已完成任務」區塊顯示已完成任務
- [ ] 卡片樣式:灰色調 + 打勾圖標
- [ ] 顯示完成時間與總投入時間

### 3.2 回溯對話框
- [ ] 建立 CompletedTaskDialog 元件
- [ ] 時間軸式摘要顯示
  - 每個子任務的執行時間區間
  - 投入時間
  - 暫停次數
- [ ] 詳細記錄展開功能
  - 點擊子任務卡片展開詳細操作記錄
  - 顯示所有開始/暫停/繼續/完成時間點
- [ ] 時間分布圓餅圖
  - 顯示各子任務的時間佔比

---

## Phase 4: 新增任務卡片時間分布按鈕與圓餅圖

### 4.1 時間分布按鈕
- [ ] 在 TaskCard 元件新增「📊 時間分布」按鈕
- [ ] 按鈕位置:卡片右上角或底部
- [ ] 僅在任務有時間記錄時顯示

### 4.2 時間分布對話框
- [ ] 建立 TimeDistributionDialog 元件
- [ ] 子任務時間圓餅圖
  - 使用 Recharts PieChart
  - 顯示各子任務的時間佔比
  - 中心顯示總投入時間
- [ ] 效率分析圖表(進階)
  - 雙軸長條圖:預估時間 vs 實際時間
  - 顏色編碼:綠色(準時)、紅色(超時)

---

## Phase 5: 建立獨立時間分析頁面

### 5.1 頁面結構
- [ ] 新增「時間分析」分頁(與「儀表板」「所有任務列表」並列)
- [ ] 建立 TimeAnalysis.tsx 頁面元件
- [ ] 更新 App.tsx 路由配置

### 5.2 總覽區塊
- [ ] 本週總投入時間卡片
- [ ] 各部門時間佔比圓餅圖
- [ ] 各任務分級時間佔比圓餅圖

### 5.3 任務排行榜
- [ ] 最耗時任務 TOP 10(長條圖)
- [ ] 效率最高任務 TOP 10(實際 vs 預估)
- [ ] 超時任務列表

### 5.4 人員效率分析
- [ ] 各成員投入時間統計(長條圖)
- [ ] 任務完成率比較
- [ ] 平均任務執行時間

### 5.5 篩選器功能
- [ ] 時間範圍篩選(今日/本週/本月/自訂)
- [ ] 部門篩選
- [ ] 負責人篩選

### 5.6 匯出功能
- [ ] 匯出 PDF 報告
- [ ] 匯出 Excel 數據

---

## Phase 6: 測試所有時間追蹤功能

### 6.1 操作記錄測試
- [ ] 測試開始/暫停/繼續/完成按鈕
- [ ] 驗證時間計算正確性
- [ ] 檢查操作記錄是否完整儲存

### 6.2 回溯功能測試
- [ ] 完成一個任務並查看回溯對話框
- [ ] 驗證時間軸顯示正確
- [ ] 測試詳細記錄展開功能

### 6.3 時間分布測試
- [ ] 點擊「時間分布」按鈕
- [ ] 驗證圓餅圖數據正確
- [ ] 測試效率分析圖表

### 6.4 時間分析頁面測試
- [ ] 查看總覽區塊數據
- [ ] 測試任務排行榜
- [ ] 驗證篩選器功能
- [ ] 測試匯出功能

---

## Phase 7: 交付最終成果

### 7.1 文件整理
- [ ] 更新測試報告
- [ ] 撰寫功能說明文件
- [ ] 建立使用者操作指南

### 7.2 檢查點儲存
- [ ] 儲存 v6.0 版本檢查點
- [ ] 準備交付附件

### 7.3 交付給使用者
- [ ] 提供專案連結
- [ ] 說明新功能使用方式
- [ ] 提供後續擴展建議

---

## 技術棧

**前端框架**: React 19 + TypeScript
**圖表庫**: Recharts
**UI 元件**: shadcn/ui
**樣式**: Tailwind CSS 4

**數據結構**:
- TaskActionLog: 操作記錄類型
- CompletedTask: 已完成任務類型
- TimeStats: 時間統計類型

**元件清單**:
- CompletedTaskDialog: 已完成任務回溯對話框
- TimeDistributionDialog: 時間分布對話框
- TimeAnalysis: 時間分析頁面
- EfficiencyChart: 效率分析圖表元件
- TaskRankingChart: 任務排行榜圖表元件

---

## 預期成果

1. ✅ 完整的時間追蹤記錄系統
2. ✅ 已完成任務回溯功能
3. ✅ 任務卡片時間分布分析
4. ✅ 獨立的時間分析頁面
5. ✅ 主管審核與考核工具
6. ✅ 數據匯出功能

---

建立時間: 2025-11-27 22:15
預計完成時間: 2025-11-27 23:00
